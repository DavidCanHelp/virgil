class Diamond(top: SsaBlock, cond: SsaInstr) {
	def tblock = SsaBlock.new();
	def fblock = SsaBlock.new();
	def merge = SsaBlock.new();
	new() {
		top.append(SsaIf.new(cond, tblock, fblock));
		tblock.append(SsaGoto.new(merge));
		fblock.append(SsaGoto.new(merge));
	}
	def phi(t: Type, tv: SsaInstr, fv: SsaInstr) -> SsaPhi {
		var phi = SsaPhi.new(t, merge, [tv, fv]);
		merge.prepend(phi);
		return phi;
	}
}

