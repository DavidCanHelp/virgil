//@execute (false, 0)=287; (true, 0)=287; (false, 1)=188; (true, 1)=188; (false, 2)=89; (true, 2)=89; (false, 3)=293; (true, 3)=293; (false, 4)=0; (true, 4)=0
//@heap-size=5000
class mcx_0 { def m() -> int { return 1; } }
class mcx_000 extends mcx_0 {}
class mcx_001 extends mcx_0 {}
class mcx_002 extends mcx_0 {}
class mcx_003 extends mcx_0 {}
class mcx_004 extends mcx_0 {}
class mcx_005 extends mcx_0 {}
class mcx_006 extends mcx_0 {}
class mcx_007 extends mcx_0 {}
class mcx_008 extends mcx_0 {}
class mcx_009 extends mcx_0 {}
class mcx_010 extends mcx_0 {}
class mcx_011 extends mcx_0 {}
class mcx_012 extends mcx_0 {}
class mcx_013 extends mcx_0 {}
class mcx_014 extends mcx_0 {}
class mcx_015 extends mcx_0 {}
class mcx_016 extends mcx_0 {}
class mcx_017 extends mcx_0 {}
class mcx_018 extends mcx_0 {}
class mcx_019 extends mcx_0 {}
class mcx_020 extends mcx_0 {}
class mcx_021 extends mcx_0 {}
class mcx_022 extends mcx_0 {}
class mcx_023 extends mcx_0 {}
class mcx_024 extends mcx_0 {}
class mcx_025 extends mcx_0 {}
class mcx_026 extends mcx_0 {}
class mcx_027 extends mcx_0 {}
class mcx_028 extends mcx_0 {}
class mcx_029 extends mcx_0 {}
class mcx_030 extends mcx_0 {}
class mcx_031 extends mcx_0 {}
class mcx_032 extends mcx_0 {}
class mcx_033 extends mcx_0 {}
class mcx_034 extends mcx_0 {}
class mcx_035 extends mcx_0 {}
class mcx_036 extends mcx_0 {}
class mcx_037 extends mcx_0 {}
class mcx_038 extends mcx_0 {}
class mcx_039 extends mcx_0 {}
class mcx_040 extends mcx_0 {}
class mcx_041 extends mcx_0 {}
class mcx_042 extends mcx_0 {}
class mcx_043 extends mcx_0 {}
class mcx_044 extends mcx_0 {}
class mcx_045 extends mcx_0 {}
class mcx_046 extends mcx_0 {}
class mcx_047 extends mcx_0 {}
class mcx_048 extends mcx_0 {}
class mcx_049 extends mcx_0 {}
class mcx_050 extends mcx_0 {}
class mcx_051 extends mcx_0 {}
class mcx_052 extends mcx_0 {}
class mcx_053 extends mcx_0 {}
class mcx_054 extends mcx_0 {}
class mcx_055 extends mcx_0 {}
class mcx_056 extends mcx_0 {}
class mcx_057 extends mcx_0 {}
class mcx_058 extends mcx_0 {}
class mcx_059 extends mcx_0 {}
class mcx_060 extends mcx_0 {}
class mcx_061 extends mcx_0 {}
class mcx_062 extends mcx_0 {}
class mcx_063 extends mcx_0 {}
class mcx_064 extends mcx_0 {}
class mcx_065 extends mcx_0 {}
class mcx_066 extends mcx_0 {}
class mcx_067 extends mcx_0 {}
class mcx_068 extends mcx_0 {}
class mcx_069 extends mcx_0 {}
class mcx_070 extends mcx_0 {}
class mcx_071 extends mcx_0 {}
class mcx_072 extends mcx_0 {}
class mcx_073 extends mcx_0 {}
class mcx_074 extends mcx_0 {}
class mcx_075 extends mcx_0 {}
class mcx_076 extends mcx_0 {}
class mcx_077 extends mcx_0 {}
class mcx_078 extends mcx_0 {}
class mcx_079 extends mcx_0 {}
class mcx_080 extends mcx_0 {}
class mcx_081 extends mcx_0 {}
class mcx_082 extends mcx_0 {}
class mcx_083 extends mcx_0 {}
class mcx_084 extends mcx_0 {}
class mcx_085 extends mcx_0 {}
class mcx_086 extends mcx_0 {}
class mcx_087 extends mcx_0 {}
class mcx_088 extends mcx_0 {}
class mcx_089 extends mcx_0 {}
class mcx_090 extends mcx_0 { def m() -> int { return 2; } }
class mcx_091 extends mcx_0 {}
class mcx_092 extends mcx_0 {}
class mcx_093 extends mcx_0 {}
class mcx_094 extends mcx_0 {}
class mcx_095 extends mcx_0 {}
class mcx_096 extends mcx_0 {}
class mcx_097 extends mcx_0 {}
class mcx_098 extends mcx_0 {}
class mcx_099 extends mcx_0 {}

class mcx_1 extends mcx_0 {}

class mcx_100 extends mcx_1 {}
class mcx_101 extends mcx_1 {}
class mcx_102 extends mcx_1 {}
class mcx_103 extends mcx_1 {}
class mcx_104 extends mcx_1 {}
class mcx_105 extends mcx_1 {}
class mcx_106 extends mcx_1 {}
class mcx_107 extends mcx_1 {}
class mcx_108 extends mcx_1 {}
class mcx_109 extends mcx_1 {}
class mcx_110 extends mcx_1 {}
class mcx_111 extends mcx_1 {}
class mcx_112 extends mcx_1 {}
class mcx_113 extends mcx_1 {}
class mcx_114 extends mcx_1 {}
class mcx_115 extends mcx_1 {}
class mcx_116 extends mcx_1 {}
class mcx_117 extends mcx_1 {}
class mcx_118 extends mcx_1 {}
class mcx_119 extends mcx_1 {}
class mcx_120 extends mcx_1 {}
class mcx_121 extends mcx_1 {}
class mcx_122 extends mcx_1 {}
class mcx_123 extends mcx_1 {}
class mcx_124 extends mcx_1 {}
class mcx_125 extends mcx_1 {}
class mcx_126 extends mcx_1 {}
class mcx_127 extends mcx_1 {}
class mcx_128 extends mcx_1 {}
class mcx_129 extends mcx_1 {}
class mcx_130 extends mcx_1 {}
class mcx_131 extends mcx_1 {}
class mcx_132 extends mcx_1 {}
class mcx_133 extends mcx_1 {}
class mcx_134 extends mcx_1 {}
class mcx_135 extends mcx_1 {}
class mcx_136 extends mcx_1 {}
class mcx_137 extends mcx_1 {}
class mcx_138 extends mcx_1 {}
class mcx_139 extends mcx_1 {}
class mcx_140 extends mcx_1 {}
class mcx_141 extends mcx_1 {}
class mcx_142 extends mcx_1 {}
class mcx_143 extends mcx_1 {}
class mcx_144 extends mcx_1 {}
class mcx_145 extends mcx_1 {}
class mcx_146 extends mcx_1 {}
class mcx_147 extends mcx_1 {}
class mcx_148 extends mcx_1 {}
class mcx_149 extends mcx_1 {}
class mcx_150 extends mcx_1 {}
class mcx_151 extends mcx_1 {}
class mcx_152 extends mcx_1 {}
class mcx_153 extends mcx_1 {}
class mcx_154 extends mcx_1 {}
class mcx_155 extends mcx_1 {}
class mcx_156 extends mcx_1 {}
class mcx_157 extends mcx_1 {}
class mcx_158 extends mcx_1 {}
class mcx_159 extends mcx_1 {}
class mcx_160 extends mcx_1 {}
class mcx_161 extends mcx_1 {}
class mcx_162 extends mcx_1 {}
class mcx_163 extends mcx_1 {}
class mcx_164 extends mcx_1 {}
class mcx_165 extends mcx_1 {}
class mcx_166 extends mcx_1 {}
class mcx_167 extends mcx_1 {}
class mcx_168 extends mcx_1 {}
class mcx_169 extends mcx_1 {}
class mcx_170 extends mcx_1 {}
class mcx_171 extends mcx_1 {}
class mcx_172 extends mcx_1 {}
class mcx_173 extends mcx_1 {}
class mcx_174 extends mcx_1 {}
class mcx_175 extends mcx_1 {}
class mcx_176 extends mcx_1 {}
class mcx_177 extends mcx_1 {}
class mcx_178 extends mcx_1 {}
class mcx_179 extends mcx_1 {}
class mcx_180 extends mcx_1 {}
class mcx_181 extends mcx_1 {}
class mcx_182 extends mcx_1 {}
class mcx_183 extends mcx_1 {}
class mcx_184 extends mcx_1 {}
class mcx_185 extends mcx_1 {}
class mcx_186 extends mcx_1 {}
class mcx_187 extends mcx_1 {}
class mcx_188 extends mcx_1 {}
class mcx_189 extends mcx_1 {}
class mcx_190 extends mcx_1 { def m() -> int { return 3; } }
class mcx_191 extends mcx_1 {}
class mcx_192 extends mcx_1 {}
class mcx_193 extends mcx_1 {}
class mcx_194 extends mcx_1 {}
class mcx_195 extends mcx_1 {}
class mcx_196 extends mcx_1 {}
class mcx_197 extends mcx_1 {}
class mcx_198 extends mcx_1 {}
class mcx_199 extends mcx_1 {}

class mcx_2 extends mcx_1 {}

class mcx_200 extends mcx_2 {}
class mcx_201 extends mcx_2 {}
class mcx_202 extends mcx_2 {}
class mcx_203 extends mcx_2 {}
class mcx_204 extends mcx_2 {}
class mcx_205 extends mcx_2 {}
class mcx_206 extends mcx_2 {}
class mcx_207 extends mcx_2 {}
class mcx_208 extends mcx_2 {}
class mcx_209 extends mcx_2 {}
class mcx_210 extends mcx_2 {}
class mcx_211 extends mcx_2 {}
class mcx_212 extends mcx_2 {}
class mcx_213 extends mcx_2 {}
class mcx_214 extends mcx_2 {}
class mcx_215 extends mcx_2 {}
class mcx_216 extends mcx_2 {}
class mcx_217 extends mcx_2 {}
class mcx_218 extends mcx_2 {}
class mcx_219 extends mcx_2 {}
class mcx_220 extends mcx_2 {}
class mcx_221 extends mcx_2 {}
class mcx_222 extends mcx_2 {}
class mcx_223 extends mcx_2 {}
class mcx_224 extends mcx_2 {}
class mcx_225 extends mcx_2 {}
class mcx_226 extends mcx_2 {}
class mcx_227 extends mcx_2 {}
class mcx_228 extends mcx_2 {}
class mcx_229 extends mcx_2 {}
class mcx_230 extends mcx_2 {}
class mcx_231 extends mcx_2 {}
class mcx_232 extends mcx_2 {}
class mcx_233 extends mcx_2 {}
class mcx_234 extends mcx_2 {}
class mcx_235 extends mcx_2 {}
class mcx_236 extends mcx_2 {}
class mcx_237 extends mcx_2 {}
class mcx_238 extends mcx_2 {}
class mcx_239 extends mcx_2 {}
class mcx_240 extends mcx_2 {}
class mcx_241 extends mcx_2 {}
class mcx_242 extends mcx_2 {}
class mcx_243 extends mcx_2 {}
class mcx_244 extends mcx_2 {}
class mcx_245 extends mcx_2 {}
class mcx_246 extends mcx_2 {}
class mcx_247 extends mcx_2 {}
class mcx_248 extends mcx_2 {}
class mcx_249 extends mcx_2 {}
class mcx_250 extends mcx_2 {}
class mcx_251 extends mcx_2 {}
class mcx_252 extends mcx_2 {}
class mcx_253 extends mcx_2 {}
class mcx_254 extends mcx_2 {}
class mcx_255 extends mcx_2 {}
class mcx_256 extends mcx_2 {}
class mcx_257 extends mcx_2 {}
class mcx_258 extends mcx_2 {}
class mcx_259 extends mcx_2 {}
class mcx_260 extends mcx_2 {}
class mcx_261 extends mcx_2 {}
class mcx_262 extends mcx_2 {}
class mcx_263 extends mcx_2 {}
class mcx_264 extends mcx_2 {}
class mcx_265 extends mcx_2 {}
class mcx_266 extends mcx_2 {}
class mcx_267 extends mcx_2 {}
class mcx_268 extends mcx_2 {}
class mcx_269 extends mcx_2 {}
class mcx_270 extends mcx_2 { def m() -> int { return 4; } }
class mcx_271 extends mcx_2 {}
class mcx_272 extends mcx_2 {}
class mcx_273 extends mcx_2 {}
class mcx_274 extends mcx_2 {}
class mcx_275 extends mcx_2 {}
class mcx_276 extends mcx_2 {}
class mcx_277 extends mcx_2 {}
class mcx_278 extends mcx_2 {}
class mcx_279 extends mcx_2 {}
class mcx_280 extends mcx_2 {}
class mcx_281 extends mcx_2 {}
class mcx_282 extends mcx_2 {}
class mcx_283 extends mcx_2 {}
class mcx_284 extends mcx_2 {}
class mcx_285 extends mcx_2 {}
class mcx_286 extends mcx_2 {}
class mcx_287 extends mcx_2 {}
class mcx_288 extends mcx_2 {}
class mcx_289 extends mcx_2 {}

class mcx_3 {}

class mcx_300 extends mcx_3 {}
class mcx_301 extends mcx_3 {}
class mcx_302 extends mcx_3 {}
class mcx_303 extends mcx_3 {}
class mcx_304 extends mcx_3 {}
class mcx_305 extends mcx_3 {}
class mcx_306 extends mcx_3 {}
class mcx_307 extends mcx_3 {}
class mcx_308 extends mcx_3 {}
class mcx_309 extends mcx_3 {}

component many_classes01 {
	var m0s: Array<mcx_0> = alloc0();
	var m3s: Array<mcx_3> = alloc3();

	def main(alloc: bool, arg: int) -> int {
		var a = m0s; // use permanent objects
		var b = m3s;
		if (alloc) {
			// use freshly-allocated objects
			a = alloc0();
			b = alloc3();
		}

		var count = 0;
		if (arg == 0) {
			// count mcx0's
			for (i = 0; i < a.length; i = i + 1) {
				if (mcx_0.?(a[i])) count = count + 1;
			}
		}

		if (arg == 1) {
			// count mcx1's
			for (i = 0; i < a.length; i = i + 1) {
				if (mcx_1.?(a[i])) count = count + 1;
			}
		}

		if (arg == 2) {
			// count mcx2's
			for (i = 0; i < a.length; i = i + 1) {
				if (mcx_2.?(a[i])) count = count + 1;
			}
		}

		if (arg == 3) {
			// count m()'s to test virtual dispatch
			for (i = 0; i < a.length; i = i + 1) {
				if (a[i] != null) count = count + a[i].m();
			}
		}

		if (arg == 4) {
			// do cross-instanceof tests to make sure encoding scheme doesn't break
			for (i = 0; i < a.length; i = i + 1) {
				if (is3(a[i])) count = count + 1;
			}
			for (i = 0; i < b.length; i = i + 1) {
				if (is0(b[i])) count = count + 1;
			}
		}

		return count;
	}
	def is0<T>(v: T) -> bool {
		return mcx_0.?(v);
	}
	def is3<T>(v: T) -> bool {
		return mcx_3.?(v);
	}
	def alloc0() -> Array<mcx_0> {
		return [
		mcx_000.new(), mcx_001.new(), mcx_002.new(), mcx_003.new(), mcx_004.new(), mcx_005.new(), mcx_006.new(), mcx_007.new(), mcx_008.new(), null,
		mcx_010.new(), mcx_011.new(), mcx_012.new(), mcx_013.new(), mcx_014.new(), mcx_015.new(), mcx_016.new(), mcx_017.new(), mcx_018.new(), mcx_019.new(),
		mcx_020.new(), mcx_021.new(), mcx_022.new(), mcx_023.new(), mcx_024.new(), mcx_025.new(), mcx_026.new(), mcx_027.new(), mcx_028.new(), mcx_029.new(),
		mcx_030.new(), mcx_031.new(), mcx_032.new(), mcx_033.new(), mcx_034.new(), mcx_035.new(), mcx_036.new(), mcx_037.new(), mcx_038.new(), mcx_039.new(),
		mcx_040.new(), mcx_041.new(), mcx_042.new(), mcx_043.new(), mcx_044.new(), mcx_045.new(), mcx_046.new(), mcx_047.new(), mcx_048.new(), mcx_049.new(),
		mcx_050.new(), mcx_051.new(), mcx_052.new(), mcx_053.new(), mcx_054.new(), mcx_055.new(), mcx_056.new(), mcx_057.new(), mcx_058.new(), mcx_059.new(),
		mcx_060.new(), mcx_061.new(), mcx_062.new(), mcx_063.new(), mcx_064.new(), mcx_065.new(), mcx_066.new(), mcx_067.new(), mcx_068.new(), mcx_069.new(),
		mcx_070.new(), mcx_071.new(), mcx_072.new(), mcx_073.new(), mcx_074.new(), mcx_075.new(), mcx_076.new(), mcx_077.new(), mcx_078.new(), mcx_079.new(),
		mcx_080.new(), mcx_081.new(), mcx_082.new(), mcx_083.new(), mcx_084.new(), mcx_085.new(), mcx_086.new(), mcx_087.new(), mcx_088.new(), mcx_089.new(),
		mcx_090.new(), mcx_091.new(), mcx_092.new(), mcx_093.new(), mcx_094.new(), mcx_095.new(), mcx_096.new(), mcx_097.new(), mcx_098.new(), mcx_099.new(),

		mcx_100.new(), mcx_101.new(), mcx_102.new(), mcx_103.new(), mcx_104.new(), mcx_105.new(), mcx_106.new(), mcx_107.new(), mcx_108.new(), null,
		mcx_110.new(), mcx_111.new(), mcx_112.new(), mcx_113.new(), mcx_114.new(), mcx_115.new(), mcx_116.new(), mcx_117.new(), mcx_118.new(), mcx_119.new(),
		mcx_120.new(), mcx_121.new(), mcx_122.new(), mcx_123.new(), mcx_124.new(), mcx_125.new(), mcx_126.new(), mcx_127.new(), mcx_128.new(), mcx_129.new(),
		mcx_130.new(), mcx_131.new(), mcx_132.new(), mcx_133.new(), mcx_134.new(), mcx_135.new(), mcx_136.new(), mcx_137.new(), mcx_138.new(), mcx_139.new(),
		mcx_140.new(), mcx_141.new(), mcx_142.new(), mcx_143.new(), mcx_144.new(), mcx_145.new(), mcx_146.new(), mcx_147.new(), mcx_148.new(), mcx_149.new(),
		mcx_150.new(), mcx_151.new(), mcx_152.new(), mcx_153.new(), mcx_154.new(), mcx_155.new(), mcx_156.new(), mcx_157.new(), mcx_158.new(), mcx_159.new(),
		mcx_160.new(), mcx_161.new(), mcx_162.new(), mcx_163.new(), mcx_164.new(), mcx_165.new(), mcx_166.new(), mcx_167.new(), mcx_168.new(), mcx_169.new(),
		mcx_170.new(), mcx_171.new(), mcx_172.new(), mcx_173.new(), mcx_174.new(), mcx_175.new(), mcx_176.new(), mcx_177.new(), mcx_178.new(), mcx_179.new(),
		mcx_180.new(), mcx_181.new(), mcx_182.new(), mcx_183.new(), mcx_184.new(), mcx_185.new(), mcx_186.new(), mcx_187.new(), mcx_188.new(), mcx_189.new(),
		mcx_190.new(), mcx_191.new(), mcx_192.new(), mcx_193.new(), mcx_194.new(), mcx_195.new(), mcx_196.new(), mcx_197.new(), mcx_198.new(), mcx_199.new(),

		mcx_200.new(), mcx_2.new(),   mcx_202.new(), mcx_203.new(), mcx_204.new(), mcx_205.new(), mcx_206.new(), mcx_207.new(), mcx_208.new(), null,
		mcx_210.new(), mcx_211.new(), mcx_212.new(), mcx_213.new(), mcx_214.new(), mcx_215.new(), mcx_216.new(), mcx_217.new(), mcx_218.new(), mcx_219.new(),
		mcx_220.new(), mcx_221.new(), mcx_222.new(), mcx_223.new(), mcx_224.new(), mcx_225.new(), mcx_226.new(), mcx_227.new(), mcx_228.new(), mcx_229.new(),
		mcx_230.new(), mcx_231.new(), mcx_232.new(), mcx_233.new(), mcx_234.new(), mcx_235.new(), mcx_236.new(), mcx_237.new(), mcx_238.new(), mcx_239.new(),
		mcx_240.new(), mcx_241.new(), mcx_242.new(), mcx_243.new(), mcx_244.new(), mcx_245.new(), mcx_246.new(), mcx_247.new(), mcx_248.new(), mcx_249.new(),
		mcx_250.new(), mcx_251.new(), mcx_252.new(), mcx_253.new(), mcx_254.new(), mcx_255.new(), mcx_256.new(), mcx_257.new(), mcx_258.new(), mcx_259.new(),
		mcx_260.new(), mcx_261.new(), mcx_262.new(), mcx_263.new(), mcx_264.new(), mcx_265.new(), mcx_266.new(), mcx_267.new(), mcx_268.new(), mcx_269.new(),
		mcx_270.new(), mcx_271.new(), mcx_272.new(), mcx_273.new(), mcx_274.new(), mcx_275.new(), mcx_276.new(), mcx_277.new(), mcx_278.new(), mcx_279.new(),
		mcx_280.new(), mcx_281.new(), mcx_282.new(), mcx_283.new(), mcx_284.new(), mcx_285.new(), mcx_286.new(), mcx_287.new(), mcx_288.new(), mcx_289.new()
		];
	}
	def alloc3() -> Array<mcx_3> {
		return [
		mcx_300.new(), mcx_301.new(), mcx_3.new(), mcx_303.new(), mcx_304.new(), mcx_305.new(), mcx_306.new(), mcx_307.new(), mcx_308.new(), null
		];
	}
}
