//@execute = true
component lseek03 {
	var buffer: Array<byte> = Array.new(35);
	var expect: Array<byte> = "The quick brown fox jumped over the lazy dog.";
	def main() -> bool {
		var fd = Darwin.open(Pointer.atContents("test.txt\x00"), 0, 0);
		if (fd < 0) return false;
		if (Darwin.lseek(fd, (10, 0), 0).0 != 10) return false;
		if (Darwin.read(fd, Pointer.atContents(buffer), 35) != 35) return false;
		for (i = 0; i < buffer.length; i++) {
			if (buffer(i) != expect(i + 10)) return false;
		}
		return true;
	}
}
